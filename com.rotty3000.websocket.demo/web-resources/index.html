<!DOCTYPE HTML>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="/resources/style.css"/>
	<script type="text/javascript">
		var websocketsEnabled = ("WebSocket" in window);

		function logg(msg) {
			var output = document.getElementById('output')
			output.innerHTML += '<pre>' + msg + '</pre>';
			output.scrollTop = output.scrollHeight;
		}

		function startLogging() {
			if (!websocketsEnabled) {
				logg("[COM] No WebSocket support. Aborting!");

				return;
			}

			var ws = new WebSocket("ws://" + document.location.host + "/simple");

			ws.onopen = function() {
				ws.send("START");

				logg("[COM] Asked for logs");
			};

			ws.onmessage = function (evt) {
				logg("[LOG] " + evt.data);
			};

			ws.onclose = function() {
				logg("[COM] Connection is closed.");
			};
		}
	</script>
</head>
<body>
	<h2>Log UI</h2>
	<div id="sse">
		<a href="javascript:startLogging()">Start Logging</a>
	</div>
	<div id="output"></div>
	<script>
	(function() {
		if (websocketsEnabled) {
			logg("[COM] WebSocket supported by your Browser! Request the logs when ready!");
        }
        else {
        	logg("[COM] WebSocket NOT supported by your Browser!");
		}
	})();
	</script>
</body>
</html>